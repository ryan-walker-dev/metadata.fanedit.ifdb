<?xml version="1.0" encoding="utf-8"?>
<scraper framework="1.1" date="2015-01-30" content="movies">

  <CreateSearchUrl clearbuffers="no" dest="3">
    <RegExp input="$$1" output="&lt;url&gt;https://www.googleapis.com/customsearch/v1?key=$SETTING[api_key]&amp;cx=$SETTING[search_engine_id]&amp;q=\1&lt;/url&gt;" dest="3">
      <expression noclean="1" />
    </RegExp>
  </CreateSearchUrl>

  <NfoUrl dest="3">
    <RegExp input="$$1" output="\1" dest="3">
      <expression></expression>
    </RegExp>
  </NfoUrl>

  <GetSearchResults dest="8">
    <RegExp input="$$5" output="&lt;results&gt;\1&lt;/results&gt;" dest="8">

      <!--Parse JSON response from Google Custom Search API-->
      <!--Note: Kodi scraper framework only supports RegExp, not proper JSON parsing-->
      <RegExp input="$$1" output="&lt;entity&gt;&lt;title&gt;\1&lt;/title&gt;&lt;url&gt;\2&lt;/url&gt;&lt;/entity&gt;" dest="5">
        <expression noclean="1" repeat="yes">&quot;title&quot;:\s*&quot;([^&quot;]+)&quot;[\s\S]*?&quot;link&quot;:\s*&quot;(https://fanedit\.org/[^&quot;]+)&quot;</expression>
      </RegExp>

      <expression noclean="1" />
    </RegExp>
  </GetSearchResults>

  <GetDetails dest="7">
    <RegExp input="$$2" output="&lt;details&gt;\1&lt;/details&gt;" dest="7">

      <!--Plot-->
      <RegExp input="$$1" output="&lt;plot&gt;\1&lt;/plot&gt;" dest="2">
        <expression fixchars="1" trim="1">&lt;div class=&quot;jrBriefsynopsis jrFieldRow&quot;&gt;[\s\S]*?&lt;div class=&quot;jrFieldValue&quot;&gt;(.*?)&lt;\/div&gt;</expression>
      </RegExp>

      <!--Genres-->
      <RegExp input="$$5" output="&lt;genre&gt;\1&lt;/genre&gt;" dest="2+">
        <RegExp input="$$1" output="\1" dest="5">
          <expression noclean="1">&lt;div class=&quot;jrGenre jrFieldRow&quot;&gt;[\s\S]*?&lt;ul class=&quot;jrFieldValueList&quot;&gt;(.*?)&lt;\/ul&gt;</expression>
        </RegExp>
        <expression noclean="1" repeat="yes">&lt;li&gt;&lt;a[^&gt;]*&gt;([^&lt;]+)&lt;\/a&gt;&lt;\/li&gt;</expression>
      </RegExp>

      <!--Genre-->
      <RegExp input="$$1" output="&lt;genre&gt;\1&lt;/genre&gt;" dest="2+">
        <expression noclean="1">&lt;div class=&quot;jrGenre jrFieldRow&quot;&gt;[\s\S]*?&lt;li&gt;&lt;a[^&gt;]*&gt;([^&lt;]+)&lt;\/a&gt;&lt;\/li&gt;</expression>
      </RegExp>

      <!--Votes-->
      <RegExp input="$$1" output="&lt;votes&gt;\1&lt;/votes&gt;" dest="2+">
        <expression noclean="1">&lt;span[^&gt;]*&gt;\(([0-9]+)[\s]*votes?\)&lt;\/span&gt;</expression>
      </RegExp>

      <!--Rating-->
      <RegExp input="$$1" output="&lt;rating&gt;\1&lt;/rating&gt;" dest="2+">
        <expression noclean="1">&lt;span[^&gt;]*&gt;Rating:[\s]*([\d.]+)[\s]*\/[\s]*10</expression>
      </RegExp>

      <!--Thumbnail-->
      <RegExp input="$$1" output="&lt;thumb&gt;\1&lt;/thumb&gt;" dest="2+">
        <expression noclean="1">&lt;div class=&quot;jrListingMainImage&quot;&gt;[\s\S]*?&lt;a href=&quot;([^&quot;]+)&quot;[^&gt;]*class=&quot;fancybox&quot;</expression>
      </RegExp>

      <!--Tagline-->
      <RegExp input="$$1" output="&lt;tagline&gt;\1&lt;/tagline&gt;" dest="2+">
        <expression fixchars="1" trim="1">&lt;li&gt;&lt;strong&gt;Tagline:&lt;\/strong&gt;[\s]*([^&lt;]+)&lt;\/li&gt;</expression>
      </RegExp>

      <!--Directors-->
      <RegExp input="$$5" output="&lt;director&gt;\1&lt;/director&gt;" dest="2+">
        <RegExp input="$$1" output="\1" dest="5">
          <expression noclean="1">&lt;div class=&quot;jrFaneditorname jrFieldRow&quot;&gt;[\s\S]*?&lt;ul class=&quot;jrFieldValueList&quot;&gt;(.*?)&lt;\/ul&gt;</expression>
        </RegExp>
        <expression noclean="1" repeat="yes">&lt;li&gt;&lt;a[^&gt;]*&gt;([^&lt;]+)&lt;\/a&gt;&lt;\/li&gt;</expression>
      </RegExp>

      <!--Director-->
      <RegExp input="$$1" output="&lt;director&gt;\1&lt;/director&gt;" dest="2+">
        <expression noclean="1">&lt;div class=&quot;jrFaneditorname jrFieldRow&quot;&gt;[\s\S]*?&lt;ul class=&quot;jrFieldValueList&quot;&gt;[\s\S]*?&lt;li&gt;&lt;a[^&gt;]*&gt;([^&lt;]+)&lt;\/a&gt;&lt;\/li&gt;</expression>
      </RegExp>

      <!--Year-->
      <RegExp input="$$1" output="&lt;year&gt;\1&lt;/year&gt;" dest="2+">
        <expression noclean="1">&lt;div class=&quot;jrFaneditreleasedate jrFieldRow&quot;&gt;[\s\S]*?&lt;div class=&quot;jrFieldValue&quot;&gt;[\s\S]*?([0-9]{4})</expression>
      </RegExp>

      <!--Title-->
      <RegExp input="$$1" output="&lt;title&gt;\1&lt;/title&gt;" dest="2+">
        <expression noclean="1">&lt;h1[^&gt;]*&gt;([^&lt;]+)&lt;\/h1&gt;</expression>
      </RegExp>

      <expression noclean="1" />
    </RegExp>
  </GetDetails>

</scraper>
